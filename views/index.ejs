<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ทับหนึ่ง</title>
    <link rel="stylesheet" href="css/anime.css">
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <%- include('navbar')%>
    <div class="conteaner">
        <div class="sec1">
        <div class="p-61">
            <h1>welcome 6/1</h1>
            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Illo nostrum odio repudiandae minima, ipsa nam voluptatum facilis illum, at ducimus similique, quasi tempore nulla doloremque libero quisquam itaque ab pariatur.</p>
        </div>
        <div class="img-room-index"></div>
    </div>
</div>
<h1>Grouped Data by Gender</h1>

<ul>
  <% data1.forEach(item => { %>
    <li><%= item._id %>: <%= item.total %></li>
    <div class="grap" data-id="<%= item._id %>" data-total="<%= item.total %>"></div>
  <% }) %>
</ul>
<ul>
  <% data2.forEach(item => { %>
    <li><%= item._id %>: <%= item.total %></li>
    <div class="grap2" data-id2="<%= item._id %>" data-total2="<%= item.total %>"></div>
  <% }) %>
</ul>
<div class="garp1">
  <canvas id="myChart" width="1000" height="400"></canvas>
</div>
<div class="garp2">
  <canvas id="myChart2" width="1000" height="400"></canvas>
</div>

<div id="countdown1" class="countdown">
    <h2>Netsat</h2>
    <span id="days1"></span> Days 
    <span id="hours1"></span> Hours 
    <span id="min1"></span> Minutes 
    <span id="sec1"></span> Seconds
  </div>
  <div id="hny1" class="hny"></div>
  
  <div id="countdown2" class="countdown">
    <h2>tcas</h2>
    <span id="days2"></span> Days 
    <span id="hours2"></span> Hours 
    <span id="min2"></span> Minutes 
    <span id="sec2"></span> Seconds
  </div>
  <div id="hny2" class="hny"></div>

  <div id="countdown3" class="countdown">
    <h2>alevel</h2>
    <span id="days3"></span> Days 
    <span id="hours3"></span> Hours 
    <span id="min3"></span> Minutes 
    <span id="sec3"></span> Seconds
  </div>
  <div id="hny3" class="hny"></div>
  <h1>gard form heart</h1>
  <p id="pppppp">คล้ายๆngl <a href="/gard">เพิ่มการ์ดของคุณ</a></p>
  
  <div class="gard">
 
      <% data.forEach(function(gard) { %>
      <div class="gardmsg">
        <p id="name">
          &#183; <%= gard.name %>
      </p>
      <div class="massage">
      <p id="msg">
        <%= gard.comment %>
      </p>
    </div>
      </div>
      <% }); %>
  </div>


<script>
  // แสดงข้อมูลในตัวแปร data ใน Console
  var grapElements = document.querySelectorAll('.grap');
  var labels = [];
  var counts = [];

  grapElements.forEach(function(grap) {
      labels.push(grap.getAttribute('data-id'));
      counts.push(parseInt(grap.getAttribute('data-total')));
  });

  // ตรวจสอบข้อมูลที่ดึงมาได้
  console.log(labels, counts);

  // ดึงข้อมูลจากตัวแปร JavaScript และสร้างกราฟด้วย Chart.js
  const ctx = document.getElementById('myChart').getContext('2d');
  
  // สร้างกราฟแบบแท่ง
  new Chart(ctx, {
      type: 'bar',
      data: {
          labels: labels,
          datasets: [{
              label: '# of Genders',
              data: counts,
              backgroundColor: 'rgba(255, 99, 132, 0.2)',
              borderColor: 'rgba(255, 99, 132, 1)',
              borderWidth: 1
          }]
      },
      options: {
          scales: {
              y: {
                  beginAtZero: true
              }
          }
      }
  });

  // ข้อมูลสำหรับกราฟที่สอง
  var grap2Elements = document.querySelectorAll('.grap2');
  var newLabels = [];
  var newCounts = [];

  grap2Elements.forEach(function(grap2) {
      newLabels.push(grap2.getAttribute('data-id2'));
      newCounts.push(parseInt(grap2.getAttribute('data-total2')));
  });

  // ตรวจสอบข้อมูลชุดใหม่ที่ดึงมาได้
  console.log(newLabels, newCounts);

  // สร้างกราฟแบบแท่งที่สอง (ตัวอย่างเป็นกราฟเส้น)
  const ctx2 = document.getElementById('myChart2').getContext('2d');
  new Chart(ctx2, {
      type: 'bar',
      data: {
          labels: newLabels,
          datasets: [{
              label: 'Line Graph Example',
              data: newCounts,
              backgroundColor: 'rgba(54, 162, 235, 0.2)',
              borderColor: 'rgba(54, 162, 235, 1)',
              borderWidth: 1
          }]
      },
      options: {
          scales: {
              y: {
                  beginAtZero: true
              }
          }
      }
  });
</script>


</body>
    <script src="js/drop.js"></script>
    <script src="js/time.js"></script>
</html>